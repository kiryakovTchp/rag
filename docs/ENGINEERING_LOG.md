# Engineering Log

## 2025-01-27
- Дата: 2025-01-27
- Что сделано: Создан полный каркас проекта PromoAI RAG mini-SaaS
- Почему так: Нужен был готовый foundation для быстрого старта разработки с соблюдением стандартов
- Как работает: FastAPI с /healthz endpoint, структура роутеров, Celery+Redis каркас, Postgres+pgvector подготовка, R2 storage заглушка
- Эффект/риски: Готовый foundation для разработки, строгие стандарты качества, риски минимальны
- Следующие шаги: Создать PR, настроить CI/CD, реализовать реальную логику RAG

## 2025-01-27 (Sprint 1)
- Дата: 2025-01-27
- Что сделано: Реализован полный пайплайн ingest → parsing → chunking с S3/MinIO хранением, Celery очередями, парсингом документов и чанкингом
- Почему так: Нужен рабочий foundation для обработки документов с асинхронной обработкой и отслеживанием прогресса
- Как работает: POST /ingest загружает файл в S3, создает Document+Job, Celery задачи parse/chunk обрабатывают документ в элементы и чанки
- Эффект/риски: Готовый пайплайн для Sprint 1, placeholder парсеры (реальная логика в следующих спринтах), строгая типизация и линтинг
- Следующие шаги: Реализовать реальные парсеры, добавить эмбеддинги и векторный поиск

## 2025-08-30 (Sprint 1 - Финальная фиксация)
- Дата: 2025-08-30
- Что сделано: Завершен Sprint 1 с полным пайплайном таблиц, фиксацией зависимостей, метриками производительности. Реализован TableParser с pdfplumber/camelot, ChunkingPipeline для таблиц с повторением заголовков, CI с реальными сервисами.
- Почему так: Пользователь выявил критические пробелы в CI, документации и тестировании. Нужно было довести Sprint 1 до продакшен-готовности с реальными метриками.
- Как работает: TableParser извлекает таблицы из PDF (16 таблиц из table.pdf), ChunkingPipeline создает table-chunks с метаданными и повторением заголовков каждые 40 строк. CI запускает uvicorn+celery и проверяет /healthz.
- Эффект/риски: + Sprint 1 готов к продакшену. + Реальные метрики: simple.pdf 0.08s, table.pdf 4.2s. + 47 table-chunks из 63 общих. + Все e2e тесты зеленые. - Время обработки сложных PDF может быть высоким.
- Известные ограничения: Нет эмбеддингов/поиска, локальная разработка на SQLite, базовое извлечение таблиц.
- Следующие шаги: Sprint 2 - эмбеддинги (BAAI/bge-m3), индекс (pgvector), ретрив, API /query

Шаблон записи:
- Дата:
- Что сделано:
- Почему так:
- Как работает:
- Эффект/риски:
- Следующие шаги:
